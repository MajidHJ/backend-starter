## Day 36 — Users API: design before coding

### Goals (today)

* Define the **Users API (v1)** endpoints *before* writing any code.
* Specify for each endpoint: **inputs, outputs, and status codes** (contract-first).
* Align the **List Users** contract with existing pagination (`Page[T]`) in the codebase.

### What I learned

* A real API feature starts with an **explicit contract**; routes should be an implementation detail of that contract.
* **Resource-oriented routing** for CRUD:

  * Collection: `/v1/users`
  * Item: `/v1/users/{id}`
* **HTTP semantics + status discipline**:

  * `POST /v1/users` → `201`
  * `GET /v1/users` → `200`
  * `GET /v1/users/{id}` → `200` or `404`
  * `PUT /v1/users/{id}` → `200` or `404`
  * `DELETE /v1/users/{id}` → `204` (empty body) or `404`
* Pagination contract must be **stable and explicit**:

  * `GET /v1/users?page=...&size=...`
  * Response matches `Page[T]`: `{ items: [...], total: int }`
  * Pagination only makes sense with a **defined ordering** (e.g., by `id` ascending).
* FastAPI’s request validation errors commonly surface as **422** unless explicitly remapped later.

### Project structure (current)

* `app/main.py` — FastAPI app factory + router inclusion
* `app/settings.py` — configuration via Pydantic Settings
* `app/logging.py` — logging setup
* `app/deps.py` — dependency stubs / DI entrypoint
* `app/api/router.py` — top-level API router aggregator
* `app/api/health.py` — `/health` and `/ready` endpoints
* `app/api/v1/router.py` — v1 router
* `app/api/v1/demo.py` — demo endpoints
* `app/schemas/common.py` — shared DTOs (`Page[T]`, `ErrorResponse`, health responses, example req/resp)
